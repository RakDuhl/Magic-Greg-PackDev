const $RecipeIO = Java.loadClass('com.gregtechceu.gtceu.api.capability.recipe.IO');
const $ItemStackHashStrategy = Java.loadClass('com.gregtechceu.gtceu.utils.ItemStackHashStrategy');
const $ItemRecipeCapability = Java.loadClass('com.gregtechceu.gtceu.api.capability.recipe.ItemRecipeCapability');
const $GTHashMaps = Java.loadClass('com.gregtechceu.gtceu.utils.GTHashMaps');

const $Collections = Java.loadClass('java.util.Collections');
const $Object2IntOpenCustomHashMap = Java.loadClass('it.unimi.dsi.fastutil.objects.Object2IntOpenCustomHashMap');
const $Objects = Java.loadClass('java.util.Objects');
const $CosmicPartAbility = Java.loadClass('com.ghostipedia.cosmiccore.api.machine.part.CosmicPartAbility');

GTCEuStartupEvents.registry(
    'gtceu:machine', 
    event => {
        event.create('alchemical_flower', 'multiblock')
        //Tier('lv'), Tier('mv'), Tier('hv'), Tier('ev'), Tier('iv'), Tier('luv'), Tier('zpm'), Tier('uv')
        .recipeType('alchemical_flower')
        .rotationState(RotationState.NON_Y_AXIS)
        .recipeModifiers([GTRecipeModifiers.ELECTRIC_OVERCLOCK.apply(OverclockingLogic.PERFECT_OVERCLOCK)])
        .appearanceBlock(GTBlocks.CASING_STEEL_SOLID)
        .pattern(definition => FactoryBlockPattern.start()
            .aisle('..S..', '..A..', '..S..', '..G..', '.....', '.....')
            .aisle('.SSS.', '.ACA.', '.SCS.', '.GMG.', '..G..', '.....')
            .aisle('SSCSS', 'ACPCA', 'SCPCS', 'GMMMG', '.GMG.', '..G..')
            .aisle('.SCS.', '.APA.', '.SCS.', '.GMG.', '..G..', '.....')
            .aisle('.SCS.', '.APA.', '..C..', '..G..', '.....', '.....')
            .aisle('.SCS.', '.APA.', '.ACA.', '.AAA.', '.....', '.....')
            .aisle('.SCS.', '.APA.', '.CCC.', '.ACA.', '.....', '.....')
            .aisle('.SSS.', '.ACA.', '.CcC.', '.ACA.', '.....', '.....')
            .where('S', Predicates.blocks('gtceu:steel_frame')
                        .or(Predicates.autoAbilities(definition.getRecipeTypes()))
                        .or(Predicates.abilities(PartAbility.INPUT_ENERGY).setExactLimit(3)))
                        .or(Predicates.abilities(PartAbility.MAINTENANCE).setExactLimit(1))
            .where('C', Predicates.blocks(GTBlocks.CASING_STEEL_SOLID.get()))
            .where('A', Predicates.blocks('create:brass_casing'))
            .where('P', Predicates.blocks(GTBlocks.CASING_STEEL_PIPE.get()))
            .where('.', Predicates.any())
            .where('G', Predicates.blocks('minecraft:glowstone'))
            .where('M', Predicates.blocks('botania:manasteel_block'))
            .where('c', Predicates.controller(Predicates.blocks(definition.get())))
            .build()
        )
        //        .shapeInfo(controller => MultiblockShapeInfo.builder()
        //            .aisle('..e..', '..A..', '..S..', '..G..', '.....', '.....')
        //            .aisle('.eSe.', '.ACA.', '.ICI.', '.GMG.', '..G..', '.....')
        //            .aisle('SSCSS', 'ACPCA', 'SCPCS', 'GMMMG', '.GMG.', '..G..')
        //            .aisle('.SCS.', '.APA.', '.SCS.', '.GMG.', '..G..', '.....')
        //            .aisle('.SCS.', '.APA.', '..C..', '..G..', '.....', '.....')
        //            .aisle('.SCS.', '.APA.', '.ACA.', '.AAA.', '.....', '.....')
        //            .aisle('.SCS.', '.APA.', '.CCC.', '.ACA.', '.....', '.....')
        //            .aisle('.OSO.', '.ACA.', '.CcC.', '.ACA.', '.....', '.....')
        //            .where('S', Block.getBlock('gtceu:steel_frame'))
        //            .where('C', GTBlocks.CASING_STEEL_SOLID.get())
        //            .where('A', Block.GTBlock('create:brass_casing'))
        //            .where('P', GTBlocks.CASING_STEEL_PIPE.get())
        //            .where('.', Block.getBlock('minecraft:air'))
        //            .where('G', Block.getBlock('minecraft:glowstone'))
        //            .where('M', Block.getBlock('botania:manasteel_block'))
        //            .where('e', GTMachines.ENERGY_INPUT_HATCH[1], Direction.NORTH)
        //            .where('I', GTMachines.ITEM_IMPORT_BUS[1], Direction.DOWN)
        //            .where('O', GTMachines.ITEM_EXPORT_BUS[1], Direction.SOUTH)
        //            .where('c', controller, Direction.SOUTH)
        //            .build()
        //        )
        .workableCasingModel("gtceu:block/casings/solid/machine_casing_solid_steel", "gtceu:block/multiblock/blast_furnace");

        event.create('singularity_compressor', 'multiblock', Tier('luv'), Tier('uhv'))
        .recipeType('singularity_compressor')
        .rotationState(RotationState.NON_Y_AXIS)
        .appearanceBlock(GTBlocks.MACHINE_CASING_LuV)
        .pattern(definition => FactoryBlockPattern.start()
            .aisle('.........................WWW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('........................WWWWW......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '...................................................', '.........................AAA.......................', '...................................................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.......................WWTTTWW.....................', '.........................TTT.......................', '.........................TeT.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '........................AHHHA......................', '.........................CCC.......................', '........................AtttA......................', '.........................CCC.......................', '........................AHHHA......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('......................WWTTTTTWW....................', '........................TPPPT......................', '........................TPPPT......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................TTT.......................', '.......................AHAAAHA.....................', '........................C   C......................', '.......................At   tA.....................', '........................C   C......................', '.......................AHAAAHA.....................', '.........................III.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('......................WWTTTTTWW....................', '........................TPPPT......................', '........................ePPPe......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.......................AHAAAHA.....................', '........................C   C......................', '.......................At   tA.....................', '........................C   C......................', '.......................AHAAAHA.....................', '.........................III.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('......................WWTTTTTWW....................', '........................TPPPT......................', '........................TPPPT......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................TTT.......................', '.......................AHAAAHA.....................', '........................C   C......................', '.......................At   tA.....................', '........................C   C......................', '.......................AHAAAHA.....................', '.........................III.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.......................WWTTTWW.....................', '.........................TTT.......................', '.........................TeT.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '........................AHHHA......................', '........................HCCCH......................', '........................AtttA......................', '........................HCCCH......................', '........................AHHHA......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('........................WWTWW......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '........................WHGHW......................', '.........................AtA.......................', '........................WHGHW......................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHGHW......................', '.........................HtH.......................', '........................WHGHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHCHW......................', '.........................CtC.......................', '........................WHCHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHCHW......................', '.........................CtC.......................', '........................WHCHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHCHW......................', '.........................CtC.......................', '........................WHCHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHGHW......................', '.........................HtH.......................', '........................WHGHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WAAAW......................', '.........................AtA.......................', '........................WAAAW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '.........................AAA.......................', '.......................AAtttAA.....................', '.......................AAtttAA.....................', '.......................AAtttAA.....................', '.........................AAA.......................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('....WWW.................WWEWW......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '.....A.................HAtttAH.....................', '.......................AAtttAA.....................', '......................Att   ttA....................', '.....A................Att   ttA....................', '......................Att   ttA....................', '.......................AAtttAA.....................', '.....A.................HAtttAH.....................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................')
            .aisle('...WWWWW...............WWTTTWW...............WWW...', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '.......................HAtttAH.....................', '...AAAAA..............HH     HH....................', '.....C................A       A....................', '.....C...............At       tA...................', '...AAAAA.............At       tA...................', '.....C...............At       tA...................', '.....C................A       A....................', '...AAAAA..............HH     HH....................', '.......................HAtttAH.....................', '.........................AAA.......................', '...................................................', '...................................................')
            .aisle('..WWTTTWW.............WWTHHHTWW.............WWWWW..', '....TTT..................ggg.......................', '....FFF..................ggg.......................', '....TTT..................ggg.......................', '.........................HHH.......................', '...................................................', '...................................................', '.........................AAA.......................', '.......................HAtttAH.....................', '.....H................HH     HH....................', '..AAAHAAA............HH       HH...................', '...CC CC.............A         A.............AAA...', '...CC CC............At         tA..................', '..AAA AAA...........At    P    tA............AAA...', '...CC CC............At         tA..................', '...CC CC.............A         A.............AAA...', '..AAAHAAA............HH       HH...................', '.....H................HH     HH....................', '.......................HAtttAH.....................', '.........................AAA.......................', '...................................................')
            .aisle('.WWTTTTTWW...........WWTHHHHHTWW...........WWTTTWW.', '...TPPPT................gCCCg................TTT...', '...TPPPT................gCCCg................TeT...', '...TPPPT................gCCCg......................', '....TTT.................HHHHH......................', '.....T...................HHH.......................', '.....T...................HHH.......................', '.....T...................AAA.......................', '....HHH................AAtttAA.....................', '...HHHHH..............A       A....................', '.AA     AA...........A         A...................', '..C     C............A         A............AHHHA..', '..C     CHW..WWW..WWAt         tAWW..WWW..WWHCCC...', '.AA     AA.WW...WW..At  P   P  tA..WW...WW..AtttA..', '..C     CHW..WWW..WWAt         tAWW..WWW..WWHCCC...', '..C     C............A         A............AHHHA..', '.AA     AA...........A         A...................', '...HHHHH..............A       A....................', '.......................AAtttAA.....................', '.........................AAA.......................', '...................................................')
            .aisle('WWTTTTTTTWWWWWWWWWWWWWTHHHHHHHTWWWWWWWWWWWWWTTTTTWW', '..TPPPPPT..............gC   Cg..............TPPPT..', '..FPPPPPF..............gC   Cg..............TPPPT..', '..TPPPPPT..............gC   Cg...............WTW...', '...TPPPT...............HH   HH...............WTW...', '....WPW.................H   H................WTW...', '....WPW.................H   H................WTW...', '....WPW................AA   AA...............WTW...', '...HPPPH..............Att   ttA..............WTW...', '...H   H.............At       tA.............WTW...', '.AA     AA..........At         tA............TTT...', '..C     CHW..WWW..WWAt         tAWW..WWW..WAHAAAHA.', '..C     CHHHHHCHHHHAt           tAHHHHCHHHHHC   C..', '.AA     AAGGGCCCGGGAt           tAGGGCCCGGGAt   tA.', '..C     CHHHHHCHHHHAt           tAHHHHCHHHHHC   C..', '..C     CHW..WWW..WWAt         tAWW..WWW..WAHAAAHA.', '.AA     AA..........At         tA............III...', '...HHHHH.............At       tA...................', '......................Att   ttA....................', '.......................AA   AA.....................', '.........................AAA.......................')
            .aisle('WWTTTTTTTTTTTTTTTTTTTETHHHHHHHTETTTTTTTTTTTTTTTTTWW', '..TPPPPPT..............gC   Cg..............TPPPT..', '..FPPPPPc..............gC   Cg..............ePPPe..', '..TPPPPPT..............gC   Cg...............TPT...', '...TPPPT...............HH   HH...............TPT...', '...TPPPT................H   H................TPT...', '...TPPPT................H   H................TPT...', '...TPPPT...............AA   AA...............TPT...', '...HPPPH..............Att   ttA..............TPT...', '..HH   HH............At       tA.............TPT...', 'AAH     HAA.........At         tA............TPT...', '.C       C.WW...WW..At         tA..WW...WW.AHAAAHA.', '.C       CGGGCCCGGGAt           tAGGGCCCGGGGC   C..', 'AA       tttttttttttt  P  S  P  ttttttttttttt   tA.', '.C       CGGGCCCGGGAt           tAGGGCCCGGGGC   C..', '.C       C.WW...WW..At         tA..WW...WW.AHAAAHA.', 'AAH     HAA.........At         tA............III...', '..HHHHHHH............At       tA...................', '......................Att   ttA....................', '.......................AA   AA.....................', '.........................AAA.......................')
            .aisle('WWTTTTTTTWWWWWWWWWWWWWTHHHHHHHTWWWWWWWWWWWWWTTTTTWW', '..TPPPPPT..............gC   Cg..............TPPPT..', '..FPPPPPF..............gC   Cg..............TPPPT..', '..TPPPPPT..............gC   Cg...............WTW...', '...TPPPT...............HH   HH...............WTW...', '....WPW.................H   H................WTW...', '....WPW.................H   H................WTW...', '....WPW................AA   AA...............WTW...', '...HPPPH..............Att   ttA..............WTW...', '...H   H.............At       tA.............WTW...', '.AA     AA..........At         tA............TTT...', '..C     CHW..WWW..WWAt         tAWW..WWW..WAHAAAHA.', '..C     CHHHHHCHHHHAt           tAHHHHCHHHHHC   C..', '.AA     AAGGGCCCGGGAt           tAGGGCCCGGGAt   tA.', '..C     CHHHHHCHHHHAt           tAHHHHCHHHHHC   C..', '..C     CHW..WWW..WWAt         tAWW..WWW..WAHAAAHA.', '.AA     AA..........At         tA............III...', '...HHHHH.............At       tA...................', '......................Att   ttA....................', '.......................AA   AA.....................', '.........................AAA.......................')
            .aisle('.WWTTTTTWW...........WWTHHHHHTWW...........WWTTTWW.', '...TPPPT................gCCCg................TTT...', '...TPPPT................gCCCg................TeT...', '...TPPPT................gCCCg......................', '....TTT.................HHHHH......................', '.....T...................HHH.......................', '.....T...................HHH.......................', '.....T...................AAA.......................', '....HHH................AAtttAA.....................', '...HHHHH..............A       A....................', '.AA     AA...........A         A...................', '..C     C............A         A............AHHHA..', '..C     CHW..WWW..WWAt         tAWW..WWW..WWHCCC...', '.AA     AA.WW...WW..At  P   P  tA..WW...WW..AtttA..', '..C     CHW..WWW..WWAt         tAWW..WWW..WWHCCC...', '..C     C............A         A............AHHHA..', '.AA     AA...........A         A...................', '...HHHHH..............A       A....................', '.......................AAtttAA.....................', '.........................AAA.......................', '...................................................')
            .aisle('..WWTTTWW.............WWTHHHTWW.............WWWWW..', '....TTT..................ggg.......................', '....FFF..................ggg.......................', '....TTT..................ggg.......................', '.........................HHH.......................', '...................................................', '...................................................', '.........................AAA.......................', '.......................HAtttAH.....................', '.....H................HH     HH....................', '..AAAHAAA............HH       HH...................', '...CC CC.............A         A.............AAA...', '...CC CC............At         tA..................', '..AAA AAA...........At    P    tA............AAA...', '...CC CC............At         tA..................', '...CC CC.............A         A.............AAA...', '..AAAHAAA............HH       HH...................', '.....H................HH     HH....................', '.......................HAtttAH.....................', '.........................AAA.......................', '...................................................')
            .aisle('...WWWWW...............WWTTTWW...............WWW...', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '.......................HAtttAH.....................', '...AAAAA..............HH     HH....................', '.....C................A       A....................', '.....C...............At       tA...................', '...AAAAA.............At       tA...................', '.....C...............At       tA...................', '.....C................A       A....................', '...AAAAA..............HH     HH....................', '.......................HAtttAH.....................', '.........................AAA.......................', '...................................................', '...................................................')
            .aisle('....WWW.................WWEWW......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '.....A.................HAtttAH.....................', '.......................AAtttAA.....................', '......................Att   ttA....................', '.....A................Att   ttA....................', '......................Att   ttA....................', '.......................AAtttAA.....................', '.....A.................HAtttAH.....................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '.........................AAA.......................', '.......................AAtttAA.....................', '.......................AAtttAA.....................', '.......................AAtttAA.....................', '.........................AAA.......................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WAAAW......................', '.........................AtA.......................', '........................WAAAW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHGHW......................', '.........................HtH.......................', '........................WHGHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHCHW......................', '.........................CtC.......................', '........................WHCHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WCCCW......................', '.........................CtC.......................', '........................WCCCW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHCHW......................', '.........................CtC.......................', '........................WHCHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '..........................W........................', '.........................HGH.......................', '........................WHtHW......................', '.........................HGH.......................', '..........................W........................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WTW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................W.W.......................', '........................WHGHW......................', '.........................HtH.......................', '........................WHGHW......................', '.........................W.W.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('........................WWTWW......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '........................WHGHW......................', '.........................AtA.......................', '........................WHGHW......................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.......................WWTTTWW.....................', '.........................TTT.......................', '.........................TeT.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '........................AHHHA......................', '........................HCCCH......................', '........................AtttA......................', '........................HCCCH......................', '........................AHHHA......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('......................WWTTTTTWW....................', '........................TPPPT......................', '........................TPPPT......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................TTT.......................', '.......................AHAAAHA.....................', '........................C   C......................', '.......................At   tA.....................', '........................C   C......................', '.......................AHAAAHA.....................', '.........................III.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('......................WWTTTTTWW....................', '........................TPPPT......................', '........................ePPPe......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.........................TPT.......................', '.......................AHAAAHA.....................', '........................C   C......................', '.......................At   tA.....................', '........................C   C......................', '.......................AHAAAHA.....................', '.........................III.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('......................WWTTTTTWW....................', '........................TPPPT......................', '........................TPPPT......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................WTW.......................', '.........................TTT.......................', '.......................AHAAAHA.....................', '........................C   C......................', '.......................At   tA.....................', '........................C   C......................', '.......................AHAAAHA.....................', '.........................III.......................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.......................WWTTTWW.....................', '.........................TTT.......................', '.........................TeT.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '........................AHHHA......................', '.........................CCC.......................', '........................AtttA......................', '.........................CCC.......................', '........................AHHHA......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('........................WWWWW......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '.........................AAA.......................', '...................................................', '.........................AAA.......................', '...................................................', '.........................AAA.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .aisle('.........................WWW.......................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................', '...................................................')
            .where('W', Predicates.blocks('gtceu:titanium_frame'))
            .where('T', Predicates.blocks(GTBlocks.CASING_TITANIUM_STABLE.get()))
            .where('H', Predicates.blocks(GCyMBlocks.CASING_HIGH_TEMPERATURE_SMELTING.get()))
            .where('A', Predicates.blocks(GCyMBlocks.CASING_ATOMIC.get()))
            .where('t', Predicates.blocks('botania:terrasteel_block'))
            .where('P', Predicates.blocks(GTBlocks.CASING_TITANIUM_PIPE.get()))
            .where('G', Predicates.blocks('thermal:obsidian_glass'))
            .where('g', Predicates.blocks(GTBlocks.CASING_TEMPERED_GLASS.get()))
            .where('C', Predicates.heatingCoils())
            .where(' ', Predicates.air())
            .where('.', Predicates.any())
            .where('S', Predicates.blocks('projectexpansion:compact_sun'))
            .where('c', Predicates.controller(Predicates.blocks(definition.get())))
            .where('E', Predicates.abilities(PartAbility.EXPORT_ITEMS).setMaxGlobalLimited(4).setMinGlobalLimited(4))
            .where('I', Predicates.abilities(PartAbility.IMPORT_ITEMS).setMaxGlobalLimited(9).setMinGlobalLimited(27))
            .where('e', Predicates.abilities(PartAbility.INPUT_ENERGY).setMaxGlobalLimited(8).setMinGlobalLimited(12))
            .where('F', Predicates.abilities(PartAbility.IMPORT_FLUIDS).setMaxGlobalLimited(6).setMinGlobalLimited(11))
            .build()
        )
        .workableCasingModel("gtceu:block/casings/solid/machine_casing_stable_titanium","gtceu:block/multiblock/fusion_reactor");

        event.create('big_pool', 'multiblock')
        .recipeType('big_pool')
        .appearanceBlock(GTBlocks.CASING_STAINLESS_CLEAN)
        .rotationState(RotationState.NON_Y_AXIS)
        .pattern(definition => FactoryBlockPattern.start()
            .aisle('...CLC...', '...CLC...', '...CLC...', '...CCC...', '.........')
            .aisle('.LCCCCCL.', '.LCRRRCL.', '.LCRRRCL.', '.LMGGGML.', '.........')
            .aisle('.CCRRRCC.', '.CM   MC.', '.CR   RC.', '.MG   GM.', '...GGG...')
            .aisle('CCRRRRRCC', 'CR     RC', 'CR     RC', 'CG     GC', '..GGGGG..')
            .aisle('LCRRMRRCL', 'LR     RL', 'LR     RL', 'CG     GC', '..GGGGG..')
            .aisle('CCRRRRRCC', 'CR     RC', 'CR     RC', 'CG     GC', '..GGGGG..')
            .aisle('.CCRRRCC.', '.CM   MC.', '.CR   RC.', '.MG   GM.', '...GGG...')
            .aisle('.LCCCCCL.', '.LCRRRCL.', '.LCRRRCL.', '.LMGGGML.', '.........')
            .aisle('...CcC...', '...CLC...', '...CLC...', '...CCC...', '.........')
            .where('R', Predicates.blocks('botania:livingrock'))
            .where('M', Predicates.blocks('botania:manasteel_block'))
            .where('L', Predicates.blocks('botania:livingwood_log'))
            .where('G', Predicates.blocks('botania:mana_glass'))
            .where('C', Predicates.blocks(GTBlocks.CASING_STAINLESS_CLEAN.get())
                        .or(Predicates.autoAbilities(definition.getRecipeTypes()))
                        .or(Predicates.abilities(PartAbility.INPUT_ENERGY).setExactLimit(2).setMinGlobalLimited(1)))
            .where('c', Predicates.controller(Predicates.blocks(definition.get())))
            .where('.', Predicates.any())
            .where(' ', Predicates.air())
            .build()
        )
        .workableCasingModel("gtceu:block/casings/solid/machine_casing_robust_tungstensteel", "gtceu:block/multiblock/implosion_compressor");

        event.create('terrestrial_chamber', 'multiblock', Tier('iv'), Tier('luv'), Tier('zpm'), Tier('uv'))
        .rotationState(RotationState.NON_Y_AXIS)
        .recipeType('terrestrial_chamber')
        .appearanceBlock(GTBlocks.CASING_TUNGSTENSTEEL_ROBUST)
        .recipeModifiers(
            [
                GTRecipeModifiers.PARALLEL_HATCH,
                GTRecipeModifiers.ELECTRIC_OVERCLOCK.apply(
                    OverclockingLogic.PERFECT_OVERCLOCK
                )
            ]
        )
        .pattern(
            definition => FactoryBlockPattern.start()
            .aisle('..RLR..', '..LML..', '..RLR..', '.......', '.......')
            .aisle('..CCC..', '..CGC..', '..CCC..', '.......', '.......')
            .aisle('RCRLRCR', 'LCGGGCL', 'RCGGGCR', '..CCC..', '..RLR..')
            .aisle('LCLTLCL', 'MGG GGM', 'LCGGGCL', '..CGC..', '..LML..')
            .aisle('RCRLRCR', 'LCGGGCL', 'RCGGGCR', '..CCC..', '..RLR..')
            .aisle('..CCC..', '..CGC..', '..CCC..', '.......', '.......')
            .aisle('..RcR..', '..LML..', '..RLR..', '.......', '.......')
            .where('R', Predicates.blocks('botania:livingrock'))
            .where('M', Predicates.blocks('botania:manasteel_block'))
            .where('G', Predicates.blocks('botania:mana_glass'))
            .where('T', Predicates.blocks('botania:terrasteel_block'))
            .where('L', Predicates.blocks('minecraft:lapis_block'))
            .where('C', Predicates.blocks(GTBlocks.CASING_TUNGSTENSTEEL_ROBUST.get())
                        .or(Predicates.autoAbilities(definition.getRecipeTypes()))
                        .or(Predicates.abilities(PartAbility.INPUT_ENERGY).setMinGlobalLimited(1).setMaxGlobalLimited(4)))
            .where('c', Predicates.controller(Predicates.blocks(definition.get())))
            .where('.', Predicates.any())
            .where(' ', Predicates.air())
            .build()
        )
        .workableCasingModel("gtceu:block/casings/solid/machine_casing_robust_tungstensteel", "gtceu:block/multiblock/implosion_compressor");

        event.create('mana_steam_boiler', 'multiblock', Tier('ulv'), Tier('lv'), Tier('mv'), Tier('hv'), Tier('ev'))
        .recipeType('mana_steam_boiler')
        .appearanceBlock(GTBlocks.CASING_BRONZE_BRICKS)
        .rotationState(RotationState.NON_Y_AXIS)
        .pattern(
            definition => FactoryBlockPattern.start()
            .aisle('.ICI.', '.CCC.', '.MMM.', '.CCC.', '.....')
            .aisle('FCCCF', 'CPPPC', 'MPPPM', 'CPPPC', '.OOO.')
            .aisle('FCCCF', 'CPPPC', 'MPPPM', 'CPPPC', '.OOO.')
            .aisle('FCCCF', 'CPPPC', 'MPPPM', 'CPPPC', '.OOO.')
            .aisle('.IEI.', '.CCC.', '.MMM.', '.CCC.', '.....')
            .where('I', Predicates.blocks(GTBlocks.CASING_BRONZE_BRICKS.get())
                    .or(Predicates.abilities(PartAbility.IMPORT_ITEMS).setMinGlobalLimited(1)))
            .where('F', Predicates.blocks(GTBlocks.CASING_BRONZE_BRICKS.get())
                    .or(Predicates.abilities(PartAbility.IMPORT_FLUIDS).setMaxGlobalLimited(6)))
            .where('O', Predicates.blocks(GTBlocks.CASING_BRONZE_BRICKS.get())
                    .or(Predicates.abilities(PartAbility.EXPORT_FLUIDS).setMaxGlobalLimited(9).setMinGlobalLimited(1)))
            .where('C', Predicates.blocks(GTBlocks.CASING_BRONZE_BRICKS.get()).setMinGlobalLimited(24))
            .where('P', Predicates.blocks(GTBlocks.CASING_BRONZE_PIPE.get()))
            .where('M', Predicates.blocks('botania:manasteel_block'))
            .where('E', Predicates.controller(Predicates.blocks(definition.get())))
            .where('.', Predicates.any())
            .build()
        )
        .workableCasingModel("gtceu:block/casings/solid/machine_casing_bronze_plated_bricks","gtceu:block/multiblock/steam_oven");


    }
)